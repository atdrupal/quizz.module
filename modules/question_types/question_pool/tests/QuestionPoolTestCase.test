<?php

class QuestionPoolTestCase extends QuizQuestionTestCase {

  protected $questionPlugin = 'pool';

  public static function getInfo() {
    return array(
        'name'        => 'Question pool',
        'description' => 'Test cases for pool question type.',
        'group'       => 'Quiz question',
    );
  }

  function setUp($modules = array(), $admin_permissions = array(), $user_permissions = array()) {
    $modules[] = 'question_pool';
    $modules[] = 'entityreference';
    parent::setUp($modules, $admin_permissions, $user_permissions);
  }

  public function testCreateQuestion() {
    return $this->drupalCreateQuestion(array(
          'type'  => 'question_pool',
          'title' => 'Pool question title',
          'body'  => 'Pool body text',
    // Check new entity-reference field is created
    $this->assertNotNull(field_info_field('field_question_reference'));
    $this->assertNotNull(field_info_instance('quiz_question', 'field_question_reference', 'default_pool'));

    // Create new pool question
    $question = $this->drupalCreateQuestion(array(
        'type'  => 'question_pool',
        'title' => 'Pool question title',
        'body'  => 'Pool body text',
    ));

    // Make sure custom field values are stored

    return $question;
  }

}
